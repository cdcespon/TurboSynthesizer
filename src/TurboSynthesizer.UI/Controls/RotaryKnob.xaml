<?xml version="1.0" encoding="utf-8" ?>
<ContentView xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="TurboSynthesizer.UI.Controls.RotaryKnob">
    <ContentView.Content>
        <Grid RowDefinitions="Auto,Auto" HorizontalOptions="Center" VerticalOptions="Center">
            
            <!-- Knob Visual -->
            <Grid Grid.Row="0" WidthRequest="60" HeightRequest="60">
                
                <!-- Background Circle -->
                <Ellipse Fill="{StaticResource Gray900}" Stroke="{StaticResource Gray600}" StrokeThickness="2" />
                
                <!-- Indicator (Simple Line for now, could be Path) -->
                <BoxView Color="{StaticResource Primary}" 
                         WidthRequest="4" 
                         HeightRequest="20" 
                         VerticalOptions="Start" 
                         HorizontalOptions="Center"
                         TranslationY="4"
                         Rotation="{Binding IndicatorRotation, Source={RelativeSource AncestorType={x:Type ContentView}}}"
                         AnchorY="1.3" /> 
                         <!-- AnchorY trick to rotate around center of knob even if BoxView is top aligned. 
                              Actually, better to put BoxView in center and translate/rotate. -->
                
                <Grid.GestureRecognizers>
                    <PanGestureRecognizer PanUpdated="OnPanUpdated" />
                </Grid.GestureRecognizers>
            </Grid>
            
            <!-- Label -->
            <Label Grid.Row="1" 
                   Text="{Binding Label, Source={RelativeSource AncestorType={x:Type ContentView}}}"
                   TextColor="{StaticResource White}"
                   FontSize="10"
                   HorizontalOptions="Center" />
                   
            <!-- Value Display (Optional, interactive) -->
             <Label Grid.Row="0" 
                   Text="{Binding Value, Source={RelativeSource AncestorType={x:Type ContentView}}, StringFormat='{0:F1}'}"
                   TextColor="{StaticResource White}"
                   FontSize="12"
                   HorizontalOptions="Center" 
                   VerticalOptions="Center"
                   IsVisible="False"/> <!-- Hidden by default, show on hover/touch? -->
        </Grid>
    </ContentView.Content>
</ContentView>
